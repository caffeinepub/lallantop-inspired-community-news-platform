{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Convert Global Nexus to a Progressive Web App (PWA)",
  "requirements": [
    {
      "id": "REQ-33",
      "summary": "Create manifest.json with Global Nexus PWA configuration including name, branding colors, display mode, and icon references",
      "acceptanceCriteria": [
        "frontend/public/manifest.json exists and is valid JSON",
        "name field is 'Global Nexus' and short_name is 'Global Nexus'",
        "display is 'standalone', theme_color is '#1A6FBF', background_color is '#1a1a1a'",
        "icons array references both 192×192 and 512×512 PNG icons with correct paths",
        "Browser DevTools Application > Manifest panel shows no errors"
      ],
      "file_operations": [
        {
          "path": "frontend/public/manifest.json",
          "operation": "create",
          "description": "Create PWA manifest file with Global Nexus branding: name 'Global Nexus', short_name 'Global Nexus', description 'Multilingual community-driven news platform', start_url '/', display 'standalone', orientation 'portrait', theme_color '#1A6FBF', background_color '#1a1a1a', and icons array referencing /assets/icons/icon-192x192.png and /assets/icons/icon-512x512.png with type 'image/png' and purpose 'any maskable'."
        }
      ]
    },
    {
      "id": "REQ-34",
      "summary": "Add PWA meta tags to index.html for manifest linking, theme colors, mobile web app capabilities, and platform-specific icons",
      "acceptanceCriteria": [
        "index.html contains <link rel='manifest' href='/manifest.json'>",
        "index.html contains theme-color meta tag with value #1A6FBF",
        "index.html contains apple-mobile-web-app-capable and apple-touch-icon meta tags",
        "Existing page title 'Global Nexus' and favicon remain unchanged",
        "Lighthouse PWA audit shows all installability criteria met"
      ],
      "file_operations": [
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Add PWA meta tags to the <head> section: (1) <link rel='manifest' href='/manifest.json'>, (2) <meta name='theme-color' content='#1A6FBF'>, (3) <meta name='mobile-web-app-capable' content='yes'>, (4) <meta name='apple-mobile-web-app-capable' content='yes'>, (5) <meta name='apple-mobile-web-app-status-bar-style' content='default'>, (6) <meta name='apple-mobile-web-app-title' content='Global Nexus'>, (7) <link rel='apple-touch-icon' href='/assets/icons/icon-192x192.png'>, (8) <meta name='msapplication-TileColor' content='#1A6FBF'>, (9) <meta name='msapplication-TileImage' content='/assets/icons/icon-192x192.png'>. Preserve the existing title tag 'Global Nexus' and favicon link."
        }
      ]
    },
    {
      "id": "REQ-35",
      "summary": "Implement service worker with cache-first strategy for static assets and network-first strategy for ICP API calls, and register it in index.html",
      "acceptanceCriteria": [
        "frontend/public/sw.js exists with install, fetch, and activate event handlers",
        "Static assets are cached on service worker install",
        "App shell loads when network is offline (verified via DevTools Network > Offline mode)",
        "Service worker is registered in index.html",
        "Browser DevTools Application > Service Workers panel shows the worker as active"
      ],
      "file_operations": [
        {
          "path": "frontend/public/sw.js",
          "operation": "create",
          "description": "Create service worker implementing: (1) install event handler caching all static assets (HTML, CSS, JS, images, fonts) in cache named 'global-nexus-v1', (2) fetch event handler with cache-first strategy for static assets and network-first strategy for requests to '/api' or ICP canister URLs to ensure fresh backend data, (3) activate event handler clearing old cache versions. Include proper offline fallback for cached assets and ensure ICP authentication flows are not interrupted."
        },
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Add inline script at the end of <body> to register the service worker: check if 'serviceWorker' in navigator, then call navigator.serviceWorker.register('/sw.js') with error handling. Place this script after the root div and before the module script."
        }
      ]
    },
    {
      "id": "REQ-36",
      "summary": "Place generated PWA app icon PNG files at frontend/public/assets/icons/ matching manifest.json and meta tag references",
      "acceptanceCriteria": [
        "frontend/public/assets/icons/icon-192x192.png exists and is a valid PNG",
        "frontend/public/assets/icons/icon-512x512.png exists and is a valid PNG",
        "Icon paths in manifest.json exactly match these file paths",
        "Icons render correctly when the app is installed on Android or iOS home screen"
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/icons/icon-192x192.png",
          "operation": "create",
          "description": "Place the generated 192×192 PWA app icon PNG file (frontend/public/assets/generated/icon-192x192.dim_192x192.png) as a static asset at this path. This file shows a square Global Nexus blue globe logo centered on dark charcoal (#1a1a1a) background with bold white 'GN' monogram overlay. This path must match the icon reference in manifest.json and the apple-touch-icon meta tag."
        },
        {
          "path": "frontend/public/assets/icons/icon-512x512.png",
          "operation": "create",
          "description": "Place the generated 512×512 PWA app icon PNG file (frontend/public/assets/generated/icon-512x512.dim_512x512.png) as a static asset at this path. This high-resolution file shows a square Global Nexus blue globe logo centered on dark charcoal (#1a1a1a) background with bold white 'GN' monogram overlay. This path must match the icon reference in manifest.json."
        }
      ]
    },
    {
      "id": "REQ-37",
      "summary": "Add in-app PWA install prompt banner with beforeinstallprompt event handling, dismissible UI, and localStorage persistence",
      "acceptanceCriteria": [
        "A dismissible install banner appears at the bottom of the screen on mobile when the PWA install criteria are met",
        "Clicking 'Install' triggers the native browser install prompt",
        "Banner disappears after installation or dismissal and does not reappear after page reload",
        "Banner does not appear on desktop browsers that do not support PWA install",
        "Banner styling uses #1A6FBF background with white text, consistent with Global Nexus branding"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/PWAInstallPrompt.tsx",
          "operation": "create",
          "description": "Create a React component that listens for the beforeinstallprompt browser event, stores the event object in state, and renders a dismissible banner at the bottom of the screen (fixed position, z-index above content) with Global Nexus blue (#1A6FBF) background and white text reading 'Install Global Nexus — get the full app experience on your home screen', plus an 'Install' button that calls prompt() on the stashed event. On installation or dismissal, hide the banner and store dismissed state in localStorage ('pwa-install-dismissed'). Include mobile detection logic to prevent showing the banner on desktop browsers where PWA install is not applicable. Add a small 'Add to Home Screen' button variant for mobile nav area."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Import and render the PWAInstallPrompt component within the Layout component so it appears across all pages. Position it above the footer or as a fixed overlay. Also add the small mobile 'Add to Home Screen' button from PWAInstallPrompt to the mobile navigation area (visible only on mobile)."
        }
      ]
    }
  ]
}